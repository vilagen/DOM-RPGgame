<!DOCTYPE html>
<html>
<head>
    <title>Street Fighter RPG</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel = "stylesheet" href="assets/css/reset.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <!-- <link rel="stylesheet" href="assets/css/style.css"> -->
    <script type ="text/javascript" src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script>
</head>

<body>

<div class = "container">

       

<div class="row">
  <div class= "col-sm-12 col-md-12 col-lg-12">
    <p class="h1 text-center">Street Fighter RPG</p>
  </div>
</div>

<div class="row">
  <div class= "col-sm-12 col-md-12 col-lg-12">
    <p class="h2 text-center">Choose Your Fighter</p>
  </div>
</div>


<div class="row">
  <div class="col-sm-12 col-md-12 col-lg-12">

  <div class="fighters d-inline-flex">
  

  <div id="ryu" class="card choose mx-3" name="ryu" style="height:200px; width:200px">
     <img class="card-img-top" src="assets/images/ryu.jpg" style="height:90%">
     <div class="card-text text-center">100</div>
    </div>

  <div id="chunLi" class="card choose mx-3" name="chunLi" style="height:200px; width:200px">
    <img class="card-img-top" src="assets/images/chunli.jpg" style="height:90%">
    <div class="card-text text-center"></div>
  </div>

  <div id="guile" class="card choose mx-3" name="guile" style="height:200px; width:200px">
    <img class="card-img-top" src="assets/images/Guile.PNG" style="height:90%">
    <div class="card-text text-center"></div>
   </div>

   <div id = mbison class="card choose mx-3" name="mbison" style="height:200px; width:200px">
      <img class="card-img-top" src="assets/images/mbison.jpg" style="height:90%">
      <div class="card-text text-center"></div>
   </div>

    </div>
  </div>
</div>


<div class="row">
  <div class="col-sm-12 col-md-12 col-lg-12">
    <p class="h2 text-center">Your Character</p>
  </div>
</div>

<div class="row">
  <div class="col-sm-12 col-md-12 col-lg-12">
    <div class="chosen"></div>
  </div>
</div>


<div class="row">
  <div class="col-sm-12 col-md-12 col-lg-12">
    <div id="chosen"></div>
    <div id="HP"> Placeholder </div>
  </div>
</div>

<div class="row">
    <div class="col-sm-9 col-md-9 col-lg-9">
        <p class="h2 text-center">Battle!</p>
        <div id="battle"> </div>
        <div id="RivalHP"> </div>
    </div>
</div>

<div class="row">
    <button id="fight" type="button">Fight!</button>
</div>

<div class="row">
  <div class="col-sm-12 col-md-12 col-lg-12">
    <p class="h2 text-center">Enemies to Defeat!!</p>
  </div>
</div>

<div class="row">
    <div class="col-sm-9 col-md-9 col-lg-9">
        <div id = "enemies"> </div>
        <div></div>
    </div>
</div>
     
</div>

<script type="text/javascript">
    
// first, need to set command to have the card go to chosen div
// onclick event with while statement
// can change "value" of enemie hp later.
// remember,there are change and remove class functions.

var characters = {
  ryu: {
    name: 'Ryu',
    hp: 125,
    attack: 10,
    increaseAttack: 5,
  },
  chunLi: {
    name: 'Chun-Li',
    hp: 100,
    attack: 9,
    increaseAttack: 7
  },
  guile: {
    name: 'Guile',
    hp: 150,
    attack: 25,
    increaseAttack: 3
  },
  mbison: {
    name: 'M-Bison',
    hp: 180,
    attack: 30,
    increaseAttack: 0
  }
};

var rivals = {
  ryu: {
    name: 'Ryu',
    hp: 120,
    counter: 5,
  },
  chunLi: {
    name: 'Chun-Li',
    hp: 100,
    counter: 4,
  },
  guile: {
    name: 'Guile',
    hp: 150,
    counter: 10,
  },
  mbison: {
    name: 'M-Bison',
    hp: 180,
    counter: 25,
  }
};

// setting some variables
// while true, choseyourfighter allows you to choose a character
// when true, a battle is about to beigin in the battle div.

// selectedCharacter and rivalCharacter are for getting stats.

var chooseyourfighter = true
var battle = false
var selectedCharacter = null;
var rivalCharacter = null;
var remainingRivals = null;
// var remainingHP = null;
// var attack = null;

$(document).ready(function () {

  // choose a fighter and move it to chosen
$(".choose").on("click", function() {
    if(chooseyourfighter) {
      characterVal = $(this).attr('name');
      console.log(characterVal)

      selectedCharacter = characters[characterVal];
      Health = selectedCharacter.hp
      console.log(selectedCharacter);
      $("#chosen").append($(this));
      $("#HP").text(Health);
      console.log(Health);

      $(this).removeClass("choose").addClass("player");

      $("#enemies").append($(".fighters"));
      $(".choose").removeClass("choose").addClass("rival");
      remainingRivals = $(".rival").length
      console.log(remainingRivals)
      chooseyourfighter = false;
    }
})
// select an enemy and move it to the #battle div
$(document).on("click", "div.rival", function() {
    if(!chooseyourfighter && !battle) {
     rivalVal = $(this).attr('name');
     console.log(rivalVal);
     
     rivalCharacter = rivals[rivalVal];
     rivalHealth = rivalCharacter.hp
     
     $("#battle").append($(this));
     $("#RivalHP").text(rivalHealth)
     $(this).removeClass("rival").addClass("opponent")
     console.log(this)
     battle = true;
    }
});

// make 'player' and 'opponent' battle when '#fight' is pressed
// 'player' character's attack will increase based on increaseAttack stat.

$("#fight").on("click", function() {
  if (battle && !chooseyourfighter) {
   
    console.log(selectedCharacter)
    console.log(rivalCharacter)
    console.log(selectedCharacter.hp - rivalCharacter.counter)
    console.log(rivalCharacter.hp - selectedCharacter.attack)
    selectedCharacter.hp -= rivalCharacter.counter
    rivalCharacter.hp -= selectedCharacter.attack
    selectedCharacter.attack += selectedCharacter.increaseAttack
    console.log(selectedCharacter.hp)
    console.log(selectedCharacter.attack)
    console.log(rivalCharacter.hp)

    if(rivalCharacter.hp <= 0) {
      $('#battle').empty()
      console.log("You Win");
      remainingRivals--;
      battle = false;
      console.log(battle)
      console.log(rivalCharacter)
    }

    else if(selectedCharacter.hp <=0) {
      $("#chosen").empty()
      console.log("You Lose")
    }
  
  else {}
  
    console.log(battle)
  }

})

});

// document.getElementById ("fight").addEventListener ("click", updateCounter);
//     var count = 0;
//     function updateCounter() {
//         count++;  
//         console.log(count);
//     }

</script>

</body>

</html>